<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>Overview &mdash; Matplotlib WcsGrid Toolkit v0.1a documentation</title>
    <link rel="stylesheet" href="../static/mpl.css" type="text/css" />
    <link rel="stylesheet" href="../static/pygments.css" type="text/css" />
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../',
        VERSION:     '0.1a',
        COLLAPSE_MODINDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="../static/jquery.js"></script>
    <script type="text/javascript" src="../static/doctools.js"></script>
    <link rel="search" type="application/opensearchdescription+xml"
          title="Search within Matplotlib WcsGrid Toolkit v0.1a documentation"
          href="../static/opensearch.xml"/>
    <link rel="top" title="Matplotlib WcsGrid Toolkit v0.1a documentation" href="../index.html" />
    <link rel="up" title="pywcsgrid2" href="index.html" />
    <link rel="next" title="Installing" href="installing.html" />
    <link rel="prev" title="pywcsgrid2" href="index.html" /> 
  </head>
  <body>


    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="installing.html" title="Installing"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="index.html" title="pywcsgrid2"
             accesskey="P">previous</a> |</li>
        <li><a href="http://matplotlib.sourceforge.net/index.html">matplotlib&nbsp;home</a>|&nbsp;</li>
        <li><a href="http://matplotlib.sourceforge.net/mpl_toolkits/axes_grid/index.html">AxesGrid&nbsp;toolkit</a>|&nbsp;</li>
        <li><a href="../index.html">documentation</a>|&nbsp;</li>

          <li><a href="index.html" accesskey="U">pywcsgrid2</a> &raquo;</li> 
      </ul>
    </div>

      <div class="sphinxsidebar">
        <div class="sphinxsidebarwrapper">
            <h3><a href="../index.html">Table Of Contents</a></h3>
            <ul>
<li><a class="reference external" href="">Overview</a><ul>
<li><a class="reference external" href="#basic-image-display">Basic Image Display</a></li>
<li><a class="reference external" href="#changing-cooditnate-system">Changing Cooditnate System</a></li>
<li><a class="reference external" href="#plotting-in-sky-coordinate">Plotting in Sky Coordinate</a></li>
<li><a class="reference external" href="#fits-images-of-different-wcs">Fits Images of Different WCS</a></li>
<li><a class="reference external" href="#floating-axis">Floating Axis</a></li>
</ul>
</li>
</ul>

            <h4>Previous topic</h4>
            <p class="topless"><a href="index.html"
                                  title="previous chapter">pywcsgrid2</a></p>
            <h4>Next topic</h4>
            <p class="topless"><a href="installing.html"
                                  title="next chapter">Installing</a></p>
            <h3>This Page</h3>
            <ul class="this-page-menu">
              <li><a href="../sources/users/overview.txt"
                     rel="nofollow">Show Source</a></li>
            </ul>
          <div id="searchbox" style="display: none">
            <h3>Quick search</h3>
              <form class="search" action="../search.html" method="get">
                <input type="text" name="q" size="18" />
                <input type="submit" value="Go" />
                <input type="hidden" name="check_keywords" value="yes" />
                <input type="hidden" name="area" value="default" />
              </form>
              <p class="searchtip" style="font-size: 90%">
              Enter search terms or a module, class or function name.
              </p>
          </div>
          <script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body">
            
  <div class="section" id="overview">
<h1>Overview<a class="headerlink" href="#overview" title="Permalink to this headline">¶</a></h1>
<p>pywcsgrid2 is a python module to be used with matplotlib for
displaying astronomical fits images.  While there are other tools for
a similar purpose, pywcsgrid2 tries to extend the functionality of
matplotlib, instead of creating a new tool on top of the matplotlib.
In essence, it provides a custom Axes class (derived from mpl&#8217;s
original Axes class) suitable for displaying fits images.  Its main
functionality is to draw ticks, ticklabels, and grids in an
appropriate sky coordinates.  You require pyfits and kapteyn package
installed, in addition to matplotlib (you need to use svn version).</p>
<div class="contents local topic" id="contents">
<ul class="simple">
<li><a class="reference internal" href="#basic-image-display" id="id1">Basic Image Display</a></li>
<li><a class="reference internal" href="#changing-cooditnate-system" id="id2">Changing Cooditnate System</a></li>
<li><a class="reference internal" href="#plotting-in-sky-coordinate" id="id3">Plotting in Sky Coordinate</a></li>
<li><a class="reference internal" href="#fits-images-of-different-wcs" id="id4">Fits Images of Different WCS</a></li>
<li><a class="reference internal" href="#floating-axis" id="id5">Floating Axis</a></li>
</ul>
</div>
<div class="section" id="basic-image-display">
<h2><a class="toc-backref" href="#id1">Basic Image Display</a><a class="headerlink" href="#basic-image-display" title="Permalink to this headline">¶</a></h2>
<p>You read in the fits file using pyfits and create a subplot (or axes)
using pywcsgrid2&#8217;s subplot command  with its header (wcs) information.</p>
<div class="highlight-python"><div class="highlight"><pre><span class="kn">import</span> <span class="nn">pyfits</span>
<span class="kn">import</span> <span class="nn">matplotlib.pyplot</span> <span class="kn">as</span> <span class="nn">plt</span>

<span class="n">f</span> <span class="o">=</span> <span class="n">pyfits</span><span class="o">.</span><span class="n">open</span><span class="p">(</span><span class="s">&quot;data/lmc.fits&quot;</span><span class="p">)</span>
<span class="n">h</span><span class="p">,</span> <span class="n">d</span> <span class="o">=</span> <span class="n">f</span><span class="p">[</span><span class="mf">0</span><span class="p">]</span><span class="o">.</span><span class="n">header</span><span class="p">,</span> <span class="n">f</span><span class="p">[</span><span class="mf">0</span><span class="p">]</span><span class="o">.</span><span class="n">data</span>

<span class="c"># image display with mpl&#39;s original subplot(axes)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">subplot</span><span class="p">(</span><span class="mf">121</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">imshow</span><span class="p">(</span><span class="n">d</span><span class="p">,</span> <span class="n">origin</span><span class="o">=</span><span class="s">&quot;lower&quot;</span><span class="p">)</span>


<span class="c"># image display with pywcsgrid2</span>
<span class="kn">import</span> <span class="nn">pywcsgrid2</span>

<span class="n">pywcsgrid2</span><span class="o">.</span><span class="n">subplot</span><span class="p">(</span><span class="mf">122</span><span class="p">,</span> <span class="n">header</span><span class="o">=</span><span class="n">h</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">imshow</span><span class="p">(</span><span class="n">d</span><span class="p">,</span> <span class="n">origin</span><span class="o">=</span><span class="s">&quot;lower&quot;</span><span class="p">)</span>
</pre></div>
</div>
<p>[<a class="reference external" href="../plot_directive/figures/demo_basic1.py">source code</a>, <a class="reference external" href="../plot_directive/figures/demo_basic1.hires.png">hires.png</a>, <a class="reference external" href="../plot_directive/figures/demo_basic1.pdf">pdf</a>]</p>
<img alt="../images/demo_basic1.png" src="../images/demo_basic1.png" />
<p><em>pywcsgrid2.subplot</em> creates an instance of the <em>pywcsgrid2.Axes</em> class, which
is derived from mpl&#8217;s Axes but draws ticks in proper sky coordinate.
Note that the data coordinate of the AxesWcs axes is the image (pixel)
coordinate ((0-based!) of the fits file. Only the ticklabels are
displayed in the sky coordinates.  For example, xlim and ylim needs to
be in image coordinates (0-based).</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">ax</span> <span class="o">=</span> <span class="n">pywcsgrid2</span><span class="o">.</span><span class="n">axes</span><span class="p">([</span><span class="mf">0.1</span><span class="p">,</span> <span class="mf">0.1</span><span class="p">,</span> <span class="mf">0.8</span><span class="p">,</span> <span class="mf">0.8</span><span class="p">],</span> <span class="n">header</span><span class="o">=</span><span class="n">h</span><span class="p">)</span>

<span class="c"># viewlimits in image coordinate</span>
<span class="n">ax</span><span class="o">.</span><span class="n">set_xlim</span><span class="p">(</span><span class="mf">6</span><span class="p">,</span> <span class="mf">81</span><span class="p">)</span>
<span class="n">ax</span><span class="o">.</span><span class="n">set_ylim</span><span class="p">(</span><span class="mf">23</span><span class="p">,</span> <span class="mf">98</span><span class="p">)</span>
</pre></div>
</div>
<p>As in the MPL, the <tt class="docutils literal"><span class="pre">grid</span></tt> method draws grid lines. It will draw
curved grid lines using the given wcs information. Note that
the ticks are also rotated accordingly.:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">ax</span><span class="o">.</span><span class="n">grid</span><span class="p">()</span>
</pre></div>
</div>
<p>You can not use the mpl methods like <tt class="docutils literal"><span class="pre">set_ticks</span></tt>. Instead, you need
to change the wcsgrid parameters associated. For example, to set the
approximate number of ticks in each axis,</p>
<div class="highlight-python"><div class="highlight"><pre><span class="c"># change grid density</span>
<span class="n">ax</span><span class="o">.</span><span class="n">update_wcsgrid_params</span><span class="p">(</span><span class="n">label_density</span><span class="o">=</span><span class="p">[</span><span class="mf">4</span><span class="p">,</span><span class="mf">3</span><span class="p">])</span>
</pre></div>
</div>
<p>[<a class="reference external" href="../plot_directive/figures/demo_basic2.py">source code</a>, <a class="reference external" href="../plot_directive/figures/demo_basic2.hires.png">hires.png</a>, <a class="reference external" href="../plot_directive/figures/demo_basic2.pdf">pdf</a>]</p>
<img alt="../images/demo_basic2.png" src="../images/demo_basic2.png" />
<p>Custom tick location is not currently (but will be) supported.</p>
</div>
<div class="section" id="changing-cooditnate-system">
<h2><a class="toc-backref" href="#id2">Changing Cooditnate System</a><a class="headerlink" href="#changing-cooditnate-system" title="Permalink to this headline">¶</a></h2>
<p>You can change the displayed sky coordinate (i.e., coordinates for
ticks, ticklabels and grids). For example, to display the Galactic
coordinate system:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">ax</span><span class="o">.</span><span class="n">set_display_coord_system</span><span class="p">(</span><span class="s">&quot;gal&quot;</span><span class="p">)</span>
</pre></div>
</div>
<p>The coordinate system must be one of &#8220;fk4&#8221;, &#8220;fk5&#8221;, or &#8220;gal&#8221;.
Sometimes, you will need to swap the axis for better tick labeling
(i.e., xaxis display latitude and yaxis display longitude).</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">ax</span><span class="o">.</span><span class="n">swap_tick_coord</span><span class="p">()</span>
</pre></div>
</div>
<p>The pywcsgrid2.Axes class is derived from the
mpl_toolkits.axes_grid.axislines.Axes. For example, to turn on the top
and right tick labels,:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">ax</span><span class="o">.</span><span class="n">axis</span><span class="p">[</span><span class="s">&quot;top&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">major_ticklabels</span><span class="o">.</span><span class="n">set_visible</span><span class="p">(</span><span class="bp">True</span><span class="p">)</span>
<span class="n">ax</span><span class="o">.</span><span class="n">axis</span><span class="p">[</span><span class="s">&quot;right&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">major_ticklabels</span><span class="o">.</span><span class="n">set_visible</span><span class="p">(</span><span class="bp">True</span><span class="p">)</span>
</pre></div>
</div>
<p>[<a class="reference external" href="../plot_directive/figures/demo_basic3.py">source code</a>, <a class="reference external" href="../plot_directive/figures/demo_basic3.hires.png">hires.png</a>, <a class="reference external" href="../plot_directive/figures/demo_basic3.pdf">pdf</a>]</p>
<img alt="../images/demo_basic3.png" src="../images/demo_basic3.png" />
</div>
<div class="section" id="plotting-in-sky-coordinate">
<h2><a class="toc-backref" href="#id3">Plotting in Sky Coordinate</a><a class="headerlink" href="#plotting-in-sky-coordinate" title="Permalink to this headline">¶</a></h2>
<p>Again, the data coordinate of pywcsgrid2.Axes is a pixel coordinate
(0-based) of the fits header (or any equivalent wcs information).  For
plot something in sky coordinate, you may convert your data into pixel
coordinates, or you may use parasites axes (from
mpl_toolkits.axes_grid) which does that conversion for you. For
example, <tt class="docutils literal"><span class="pre">ax[&quot;fk5&quot;]</span></tt> gives you an Axes whose data coordinate is in
fk5 coordinate (available coordinates = &#8220;fk4&#8221;, &#8220;fk5&#8221;, &#8220;gal&#8221;). Most (if
not all) of the valid mpl plot commands will work. The unit for the
sky coordinates are degrees.:</p>
<div class="highlight-python"><pre># (alpha, delta) in degree
 ax["fk4"].plot([x/24.*360 for x in [4, 5, 6]],
                [-74, -70, -66], "ro-")

# (l, b)  in degree
ax["gal"].plot([(285), (276.)],
               [(-30), (-36)])</pre>
</div>
<p>[<a class="reference external" href="../plot_directive/figures/demo_basic4.py">source code</a>, <a class="reference external" href="../plot_directive/figures/demo_basic4.hires.png">hires.png</a>, <a class="reference external" href="../plot_directive/figures/demo_basic4.pdf">pdf</a>]</p>
<img alt="../images/demo_basic4.png" src="../images/demo_basic4.png" />
</div>
<div class="section" id="fits-images-of-different-wcs">
<h2><a class="toc-backref" href="#id4">Fits Images of Different WCS</a><a class="headerlink" href="#fits-images-of-different-wcs" title="Permalink to this headline">¶</a></h2>
<p>Instead of string (&#8220;fk4&#8221;, &#8220;fk5&#8221;, &#8220;gal&#8221;), you can use other pyfits
header instance. The returning axes has a data coordinate of the pixel
(image) coordinate of the given header.</p>
<p>Most of plot commands (other than image-related routine) will work as
expected.  However, displaying images in other wcs coordinate system
needs some consideration. You may simply use imshow</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">f2</span> <span class="o">=</span> <span class="n">pyfits</span><span class="o">.</span><span class="n">open</span><span class="p">(</span><span class="s">&quot;another.fits&quot;</span><span class="p">)</span>
<span class="n">h2</span><span class="p">,</span> <span class="n">d2</span> <span class="o">=</span> <span class="n">f2</span><span class="p">[</span><span class="mf">0</span><span class="p">]</span><span class="o">.</span><span class="n">header</span><span class="p">,</span> <span class="n">f2</span><span class="p">[</span><span class="mf">0</span><span class="p">]</span><span class="o">.</span><span class="n">data</span>
<span class="n">ax</span><span class="p">[</span><span class="n">h2</span><span class="p">]</span><span class="o">.</span><span class="n">imshow</span><span class="p">(</span><span class="n">d2</span><span class="p">)</span>
</pre></div>
</div>
<p>This will regrid the original image into the target wcs (regriding is
necessary since matplotlib&#8217;s imshow only supports rectangular
image). If you don&#8217;t want your data to be regridded, a vector drawing
command pcolormesh is recommended. But pcolormesh is only optimized for agg
backend and become extremely slow with increasing image size in other
backends. Therefore, it is highly recommended
that pcolormesh command is rasterized (rasterization is
fully supported in pdf and svg backend, and partially available in ps
backend). Contouring command will work fine. Contours will be drawn in
the original wcs coordinate and then will be transformed to the target
coordinate.</p>
<p>The example below is a more sophisticated one. The two fits images
with different wcs are plotted using the
mpl_toolkits.axes_grid.AxesGrid. Both axes are created using the wcs
information of the first image. Note that the gridhelper object is
explicitly created and handed to the axes, i.e., the gridhelper is
shared between two axes (this is to share grid parameters). The second
image, which has different wcs information is drawn using pcolormesh.</p>
<div class="highlight-python"><div class="highlight"><pre><span class="kn">import</span> <span class="nn">pyfits</span>

<span class="kn">import</span> <span class="nn">matplotlib.pyplot</span> <span class="kn">as</span> <span class="nn">plt</span>
<span class="kn">import</span> <span class="nn">matplotlib.cm</span> <span class="kn">as</span> <span class="nn">cm</span>
<span class="kn">from</span> <span class="nn">mpl_toolkits.axes_grid.axes_grid</span> <span class="kn">import</span> <span class="n">AxesGrid</span>
<span class="c">#from pywcsgrid2.axes_wcs import GridHelperWcs, AxesWcs</span>
<span class="kn">import</span> <span class="nn">pywcsgrid2</span>

<span class="c"># read in the first image</span>
<span class="n">xray_name</span><span class="o">=</span><span class="s">&quot;pspc_skyview.fits&quot;</span>
<span class="n">f_xray</span> <span class="o">=</span> <span class="n">pyfits</span><span class="o">.</span><span class="n">open</span><span class="p">(</span><span class="n">xray_name</span><span class="p">)</span>
<span class="n">header_xray</span> <span class="o">=</span> <span class="n">f_xray</span><span class="p">[</span><span class="mf">0</span><span class="p">]</span><span class="o">.</span><span class="n">header</span>

<span class="c"># the second image</span>
<span class="n">radio_name</span><span class="o">=</span><span class="s">&quot;radio_21cm.fits&quot;</span>
<span class="n">f_radio</span> <span class="o">=</span> <span class="n">pyfits</span><span class="o">.</span><span class="n">open</span><span class="p">(</span><span class="n">radio_name</span><span class="p">)</span>
<span class="n">header_radio</span> <span class="o">=</span> <span class="n">f_radio</span><span class="p">[</span><span class="mf">0</span><span class="p">]</span><span class="o">.</span><span class="n">header</span>


<span class="c"># grid helper to be used.</span>
<span class="n">grid_helper</span> <span class="o">=</span> <span class="n">pywcsgrid2</span><span class="o">.</span><span class="n">GridHelper</span><span class="p">(</span><span class="n">wcs</span><span class="o">=</span><span class="n">header_xray</span><span class="p">)</span>
<span class="n">grid_helper</span><span class="o">.</span><span class="n">update_wcsgrid_params</span><span class="p">(</span><span class="n">label_density</span><span class="o">=</span><span class="p">(</span><span class="mf">2</span><span class="p">,</span><span class="mf">2</span><span class="p">))</span>

<span class="c"># AxesGrid to display tow images side-by-side</span>
<span class="n">fig</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">figure</span><span class="p">(</span><span class="mf">1</span><span class="p">,</span> <span class="p">(</span><span class="mf">6</span><span class="p">,</span><span class="mf">3.5</span><span class="p">))</span>
<span class="n">grid</span> <span class="o">=</span> <span class="n">AxesGrid</span><span class="p">(</span><span class="n">fig</span><span class="p">,</span> <span class="p">(</span><span class="mf">0.15</span><span class="p">,</span> <span class="mf">0.15</span><span class="p">,</span> <span class="mf">0.8</span><span class="p">,</span> <span class="mf">0.75</span><span class="p">),</span> <span class="n">nrows_ncols</span><span class="o">=</span><span class="p">(</span><span class="mf">1</span><span class="p">,</span> <span class="mf">2</span><span class="p">),</span>
                <span class="n">axes_pad</span><span class="o">=</span><span class="mf">0.1</span><span class="p">,</span> <span class="n">share_all</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span>
                <span class="n">axes_class</span><span class="o">=</span><span class="p">(</span><span class="n">pywcsgrid2</span><span class="o">.</span><span class="n">Axes</span><span class="p">,</span> <span class="nb">dict</span><span class="p">(</span><span class="n">grid_helper</span><span class="o">=</span><span class="n">grid_helper</span><span class="p">)))</span>


<span class="n">ax1</span> <span class="o">=</span> <span class="n">grid</span><span class="p">[</span><span class="mf">0</span><span class="p">]</span>
<span class="c"># use imshow for a simply image display.</span>
<span class="n">im</span> <span class="o">=</span> <span class="n">ax1</span><span class="o">.</span><span class="n">imshow</span><span class="p">(</span><span class="n">f_xray</span><span class="p">[</span><span class="mf">0</span><span class="p">]</span><span class="o">.</span><span class="n">data</span><span class="p">,</span> <span class="n">origin</span><span class="o">=</span><span class="s">&quot;lower&quot;</span><span class="p">,</span> <span class="n">vmin</span><span class="o">=</span><span class="mf">0.</span><span class="p">,</span> <span class="n">cmap</span><span class="o">=</span><span class="n">cm</span><span class="o">.</span><span class="n">gray_r</span><span class="p">,</span>
                <span class="n">interpolation</span><span class="o">=</span><span class="s">&quot;nearest&quot;</span><span class="p">)</span>
<span class="n">im</span><span class="o">.</span><span class="n">set_clim</span><span class="p">(</span><span class="mf">4.e-05</span><span class="p">,</span> <span class="mf">0.00018</span><span class="p">)</span>


<span class="n">ax2</span> <span class="o">=</span> <span class="n">grid</span><span class="p">[</span><span class="mf">1</span><span class="p">]</span>
<span class="n">d</span> <span class="o">=</span> <span class="n">f_radio</span><span class="p">[</span><span class="mf">0</span><span class="p">]</span><span class="o">.</span><span class="n">data</span>
<span class="c"># The second image have a different wcs. While imshow works (it</span>
<span class="c"># will interpolate the second image into the image coordinate of the</span>
<span class="c"># first image), pcolormesh is prefered when the pixel size of the</span>
<span class="c"># second image is larger than that of the first image.</span>
<span class="n">im2</span> <span class="o">=</span> <span class="n">ax2</span><span class="p">[</span><span class="n">header_radio</span><span class="p">]</span><span class="o">.</span><span class="n">pcolormesh</span><span class="p">(</span><span class="n">d</span><span class="p">,</span> <span class="n">cmap</span><span class="o">=</span><span class="n">cm</span><span class="o">.</span><span class="n">gray_r</span><span class="p">)</span>

<span class="c"># draw contour. The data points of the contour lines are created in</span>
<span class="c"># the image coordinate of the second image and then are transformed to</span>
<span class="c"># the image coordinate of the first image.</span>
<span class="n">cont</span> <span class="o">=</span> <span class="n">ax2</span><span class="p">[</span><span class="n">header_radio</span><span class="p">]</span><span class="o">.</span><span class="n">contour</span><span class="p">(</span><span class="n">d</span><span class="p">,</span> <span class="n">colors</span><span class="o">=</span><span class="s">&quot;k&quot;</span><span class="p">)</span>

<span class="c"># draw contour of the second image in the first axes.</span>
<span class="n">cont2</span> <span class="o">=</span> <span class="n">ax1</span><span class="p">[</span><span class="n">header_radio</span><span class="p">]</span><span class="o">.</span><span class="n">contour</span><span class="p">(</span><span class="n">d</span><span class="p">,</span> <span class="n">colors</span><span class="o">=</span><span class="s">&quot;k&quot;</span><span class="p">)</span>

<span class="n">ax1</span><span class="o">.</span><span class="n">set_title</span><span class="p">(</span><span class="s">&quot;X-ray&quot;</span><span class="p">)</span>
<span class="n">ax2</span><span class="o">.</span><span class="n">set_title</span><span class="p">(</span><span class="s">&quot;Radio&quot;</span><span class="p">)</span>

<span class="n">plt</span><span class="o">.</span><span class="n">draw</span><span class="p">()</span>
<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>
</div>
<p>[<a class="reference external" href="../plot_directive/figures/demo_skyview.py">source code</a>, <a class="reference external" href="../plot_directive/figures/demo_skyview.hires.png">hires.png</a>, <a class="reference external" href="../plot_directive/figures/demo_skyview.pdf">pdf</a>]</p>
<img alt="../images/demo_skyview.png" src="../images/demo_skyview.png" />
</div>
<div class="section" id="floating-axis">
<h2><a class="toc-backref" href="#id5">Floating Axis</a><a class="headerlink" href="#floating-axis" title="Permalink to this headline">¶</a></h2>
<p>It is possible to create a floating axis in any sky coordinate. This
can be useful for drawing a Galactic object, where you draw a image in
RA-Dec, but want to indicate the Galactic location of the object. A
floating axis is created using the new_floating_axis method. The first
argument indicate which coordinate, and the second argument is the
value. For example, if you want to have a floating axis of b=0,
i.e. the second coordinate (index starts at 0) is 0 in the Galactic
coordinate:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">axis</span> <span class="o">=</span> <span class="n">ax</span><span class="p">[</span><span class="s">&quot;gal&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">new_floating_axis</span><span class="p">(</span><span class="mf">1</span><span class="p">,</span> <span class="mf">0.</span><span class="p">)</span>
<span class="n">ax</span><span class="o">.</span><span class="n">axis</span><span class="p">[</span><span class="s">&quot;b=0&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">axis</span>
</pre></div>
</div>
<p>See mpl_toolkits.axes_grid for more about the floating axis.</p>
<p>Here is a complete example,</p>
<div class="highlight-python"><div class="highlight"><pre><span class="kn">import</span> <span class="nn">pyfits</span>

<span class="kn">import</span> <span class="nn">matplotlib.pyplot</span> <span class="kn">as</span> <span class="nn">plt</span>
<span class="kn">import</span> <span class="nn">matplotlib.cm</span> <span class="kn">as</span> <span class="nn">cm</span>
<span class="kn">import</span> <span class="nn">pywcsgrid2</span>

<span class="c"># read in the image</span>
<span class="n">xray_name</span><span class="o">=</span><span class="s">&quot;pspc_skyview.fits&quot;</span>
<span class="n">f_xray</span> <span class="o">=</span> <span class="n">pyfits</span><span class="o">.</span><span class="n">open</span><span class="p">(</span><span class="n">xray_name</span><span class="p">)</span>

<span class="c"># grid helper to be used.</span>
<span class="n">grid_helper</span> <span class="o">=</span> <span class="n">pywcsgrid2</span><span class="o">.</span><span class="n">GridHelper</span><span class="p">(</span><span class="n">wcs</span><span class="o">=</span><span class="n">f_xray</span><span class="p">[</span><span class="mf">0</span><span class="p">]</span><span class="o">.</span><span class="n">header</span><span class="p">)</span>
<span class="n">grid_helper</span><span class="o">.</span><span class="n">update_wcsgrid_params</span><span class="p">(</span><span class="n">label_density</span><span class="o">=</span><span class="p">(</span><span class="mf">4</span><span class="p">,</span><span class="mf">4</span><span class="p">))</span>

<span class="c"># AxesGrid to display tow images side-by-side</span>
<span class="n">fig</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">figure</span><span class="p">(</span><span class="mf">1</span><span class="p">,</span> <span class="p">(</span><span class="mf">4</span><span class="p">,</span><span class="mf">3.5</span><span class="p">))</span>
<span class="n">ax1</span> <span class="o">=</span> <span class="n">pywcsgrid2</span><span class="o">.</span><span class="n">Axes</span><span class="p">(</span><span class="n">fig</span><span class="p">,</span> <span class="p">(</span><span class="mf">0.2</span><span class="p">,</span> <span class="mf">0.2</span><span class="p">,</span> <span class="mf">0.75</span><span class="p">,</span> <span class="mf">0.75</span><span class="p">),</span> <span class="n">grid_helper</span><span class="o">=</span><span class="n">grid_helper</span><span class="p">)</span>
<span class="n">fig</span><span class="o">.</span><span class="n">add_axes</span><span class="p">(</span><span class="n">ax1</span><span class="p">)</span>

<span class="c"># use imshow for a simple image display.</span>
<span class="n">im</span> <span class="o">=</span> <span class="n">ax1</span><span class="o">.</span><span class="n">imshow</span><span class="p">(</span><span class="n">f_xray</span><span class="p">[</span><span class="mf">0</span><span class="p">]</span><span class="o">.</span><span class="n">data</span><span class="p">,</span> <span class="n">origin</span><span class="o">=</span><span class="s">&quot;lower&quot;</span><span class="p">,</span> <span class="n">vmin</span><span class="o">=</span><span class="mf">0.</span><span class="p">,</span>
                <span class="n">cmap</span><span class="o">=</span><span class="n">cm</span><span class="o">.</span><span class="n">gray_r</span><span class="p">,</span>
                <span class="n">interpolation</span><span class="o">=</span><span class="s">&quot;nearest&quot;</span><span class="p">)</span>
<span class="n">im</span><span class="o">.</span><span class="n">set_clim</span><span class="p">(</span><span class="mf">4.e-05</span><span class="p">,</span> <span class="mf">0.00018</span><span class="p">)</span>


<span class="c"># create a new floating axis in Galactic coordinate</span>
<span class="c">#grid_helper_gal = ax1[&quot;gal&quot;].get_grid_helper()</span>
<span class="n">ax1</span><span class="o">.</span><span class="n">axis</span><span class="p">[</span><span class="s">&quot;b=5.5&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">ax1</span><span class="p">[</span><span class="s">&quot;gal&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">new_floating_axis</span><span class="p">(</span><span class="mf">1</span><span class="p">,</span> <span class="mf">5.5</span><span class="p">)</span>
<span class="n">ax1</span><span class="o">.</span><span class="n">axis</span><span class="p">[</span><span class="s">&quot;b=5.5&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">label</span><span class="o">.</span><span class="n">set_text</span><span class="p">(</span><span class="s">r&quot;$b=5.5^{\circ}$&quot;</span><span class="p">)</span>
<span class="n">ax1</span><span class="o">.</span><span class="n">axis</span><span class="p">[</span><span class="s">&quot;b=5.5&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">label</span><span class="o">.</span><span class="n">set_bbox</span><span class="p">(</span><span class="nb">dict</span><span class="p">(</span><span class="n">boxstyle</span><span class="o">=</span><span class="s">&quot;square,pad=0.1&quot;</span><span class="p">,</span>
                                    <span class="n">fc</span><span class="o">=</span><span class="s">&quot;w&quot;</span><span class="p">,</span> <span class="n">ec</span><span class="o">=</span><span class="s">&quot;none&quot;</span><span class="p">,</span> <span class="n">alpha</span><span class="o">=</span><span class="mf">0.7</span><span class="p">))</span>
<span class="c">#ax1.axis[&quot;b=6&quot;].major_ticklabels.set_visible(False)</span>

<span class="n">ax1</span><span class="o">.</span><span class="n">axis</span><span class="p">[</span><span class="s">&quot;l=82.5&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">ax1</span><span class="p">[</span><span class="s">&quot;gal&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">new_floating_axis</span><span class="p">(</span><span class="mf">0</span><span class="p">,</span> <span class="mf">82.5</span><span class="p">)</span>
<span class="n">ax1</span><span class="p">[</span><span class="s">&quot;gal&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">update_wcsgrid_params</span><span class="p">(</span><span class="n">coord_format</span><span class="o">=</span><span class="p">(</span><span class="s">&quot;dms&quot;</span><span class="p">,</span><span class="s">&quot;dms&quot;</span><span class="p">))</span>

<span class="n">plt</span><span class="o">.</span><span class="n">draw</span><span class="p">()</span>
<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>
</div>
<p>[<a class="reference external" href="../plot_directive/figures/demo_floating_axis.py">source code</a>, <a class="reference external" href="../plot_directive/figures/demo_floating_axis.hires.png">hires.png</a>, <a class="reference external" href="../plot_directive/figures/demo_floating_axis.pdf">pdf</a>]</p>
<img alt="../images/demo_floating_axis.png" src="../images/demo_floating_axis.png" />
</div>
</div>


          </div>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="installing.html" title="Installing"
             >next</a> |</li>
        <li class="right" >
          <a href="index.html" title="pywcsgrid2"
             >previous</a> |</li>
        <li><a href="http://matplotlib.sourceforge.net/index.html">matplotlib&nbsp;home</a>|&nbsp;</li>
        <li><a href="http://matplotlib.sourceforge.net/mpl_toolkits/axes_grid/index.html">AxesGrid&nbsp;toolkit</a>|&nbsp;</li>
        <li><a href="../index.html">documentation</a>|&nbsp;</li>

          <li><a href="index.html" >pywcsgrid2</a> &raquo;</li> 
      </ul>
    </div>
    <div class="footer">
      &copy; Copyright 2009, Jae-Joon Lee.
      Last updated on Jun 25, 2009.
      Created using <a href="http://sphinx.pocoo.org/">Sphinx</a> 0.6.2.
    </div>
  </body>
</html>